<!DOCTYPE html>
<html lang="es" ng-app='secreto'>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CARTES - Nueva Junta</title>
    <!-- Hojas de estilos -->
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../font-awesome/css/font-awesome.css">
    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="../css/mdb.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="../css/style.css" rel="stylesheet">
    <!-- Toast -->
    <link href="../css/jquery.toastmessage.css" rel="stylesheet">
    <!-- Calendario -->
    <link href="../css/material.css" rel="stylesheet">

    <link rel='stylesheet' type='text/css'href='../css/styles.css'/>

    <!-- Scripts -->
    <!-- JQuery -->
    <script type="text/javascript" src="../js/jquery-2.0.0.min.js"></script>
    <!-- AngularJS -->
    <script type="text/javascript" src="../js/angular.min.js"></script>
    <script type="text/javascript" src="../js/socket.io-1.3.7.js"></script>
    <!-- Script de control -->
    <script type="text/javascript" src="../js/app_empleado.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    <!-- Material Design Bootstrap -->
    <script type="text/javascript" src="../js/mdb.min.js"></script>
    <!-- Toast -->
    <script type="text/javascript" src="../js/jquery.toastmessage.js"></script>
    <!-- Calendario -->
    <script type="text/javascript" src="../js/bootstrap-datepicker.js"></script>

    <script type='text/javascript'src='../js/material.js'></script>
    <script type="text/javascript" src="../cordova.js"></script>
    <script type="text/javascript" charset="utf-8">

    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // Cordova is loaded and it is now safe to make calls Cordova methods
    //
    function onDeviceReady() {
        document.addEventListener("offline", onOffline, false);
        document.addEventListener("online", onOnline, false);
    }

    // Handle the offline event
    //
    function onOffline() {
      //alert("offline")
      document.getElementById("online").innerHTML = "<div class='alert alert-danger'>Esperando una conexión de red ...</div>";
    }
    function onOnline() {
      //alert("online")
      document.getElementById("online").innerHTML = "";
    }
    </script>
</head>

<body ng-controller='empleadoController' class="full-bg-img" onload="onLoad()">
<div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
    <a class="btn-floating btn-large red" href="inicio.html">
      <i class="fa fa-home"></i>
    </a>
  </div>
    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
      <header class="demo-header mdl-layout__header mdl-color--indigo-300 mdl-color-text--white">
        <div class="mdl-layout__header-row">
          <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon notificaciones" id="tareas">
            <i class="fa fa-bell"></i>
          </button>

          <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-left notificaciones-ul" for="tareas">
            <li class="mdl-menu__item" ng-repeat="tarea in tareas"><a href="tarea.html?id={{tarea._id}}"> {{tarea.TARDES}} <br> <span>Tienes {{tarea.TARCAN}} días para terminar esta tarea.</span> </a></li>
            <li class="mdl-menu__item" ng-if="tareas.length == 0">No tienes tareas asignados</li>
          </ul>
          <div class="mdl-layout-spacer"></div>
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
            <!--label class="mdl-button mdl-js-button mdl-button--icon" for="search">
              <i class="fa fa-search"></i>
            </label>
            <div class="mdl-textfield__expandable-holder">
              <input class="mdl-textfield__input" type="text" id="search">
              <label class="mdl-textfield__label" for="search">Ingresa tu consulta</label>
            </div-->
          </div>
          <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="hdrbtn">
            <i class="fa fa-ellipsis-v"></i>
          </button>
          <!--<ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="hdrbtn">
            <li class="mdl-menu__item">Acerca de</li>
            <li class="mdl-menu__item">Contacto</li>
            <li class="mdl-menu__item">Aviso de privacidad</li>
          </ul>-->
        </div>
      </header>
      <div class="demo-drawer mdl-layout__drawer mdl-color--grey mdl-color-text--blue-grey-50">
        <header class="demo-drawer-header">
          <img src="../img/user.png" class="demo-avatar">
          <div class="demo-avatar-dropdown">
            <span class="mdl-typography--text-capitalize" style="width:80%;margin:8px;">{{usuario.EMPNOM}}</span>
            
            <button id="accbtn" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-typography--text-right">
              <i class="fa fa-angle-down" role="presentation"></i>
              <span class="visuallyhidden">Accounts</span>
            </button>
            <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="accbtn">
              <li class="mdl-menu__item"><i class="fa fa-home"></i> {{empresa.CIANOM}}</li>
              <li class="mdl-menu__item"><i class="fa fa-cog"></i> <a href="../config/perfil_user.html">Perfil</a></li>
            </ul>
          </div>
        </header>
        <nav class="demo-navigation mdl-navigation mdl-color--white">
          <a class="mdl-navigation__link" href="inicio.html"><i class="mdl-color-text--blue-grey-400 fa fa-home" role="presentation"></i>&nbsp;&nbsp;Inicio</a>
          <a class="mdl-navigation__link" href="reporte_tareas.html"><i class="mdl-color-text--blue-grey-400 fa fa-pie-chart" role="presentation"></i>&nbsp;&nbsp;Reporte de tareas</a>
          <a class="mdl-navigation__link logout" href=""><i class="mdl-color-text--blue-grey-400 fa fa-sign-out" role="presentation"></i>&nbsp;&nbsp;Salir</a>
        </nav>
      </div>
    <!--/.Navbar-->
    <!-- Contenido -->
    <section> 
        <div class="container">
            <div class="space-30"></div>
            <div class="col-md-12">
                <!--Card Reveal-->
                <div class="card hoverable">
                    <div class="card-image">
                        <div class="view overlay hm-white-slight z-depth-1">
                        	<img src="../img/junta.png" class="img-thumbnail"/>
                            <!--img src="http://mdbootstrap.com/images/reg/reg%20(7).jpg"-->
                            <!--span class="card-title activator grey-text text-darken-1" style="font-size:11pt;">Clave de la Junta: {{junta.JUNNUM}}</span><br>
                            <p>{{junta.JUNMOT}}</p-->
                            <div class="mask waves-effect activator"></div>
                        </div>
                    </div>
                    <div class="card-content">
                    	<p class="titulo"> Número de tarea: {{tarea.TARCON}}</p>
                        <div class='row'>
                        	<div class="col-md-2"></div>
                        	<div class="col-md-8 text-center" style="padding: 25px;">
                        		<b>Presupuesto: ${{tarea.TARIMP}}</b><br>
								Tarea con una duración de {{tarea.TARCAN}} horas para realizar. <br>Tendras que subir como entregable un {{tarea.TARENT}} <br>
								<b>Status: {{estado_de_tarea}}</b> <br>
                                <div class="alert alert-danger" ng-if="tarea.TARES1 != '' ">
                                    Esta tarea ha sido rechazada. Las observaciones son las siguientes: <br>
                                    {{tarea.TARES1}}
                                </div>
								<p ng-if='tarea.TARSTA=="A" && bloqueado=="true"'>
									<a href="#" class="btn teal white-text" ng-click='iniciar()'>
										<i class='mdi-av-play-circle-outline'></i>&nbsp;Iniciar tarea.
									</a>
								</p>
								<div ng-if='tarea.dependencias.length > 0'>
									<h5>Dependencias</h5>
								    <table class="table">
										<thead>
									    	<td>Depende de</td>
									    	<td>Estado</td>
									    </thead>
									    <tr ng-repeat='d in dependencias'>
									    	<td >{{d.TARDES}}</td>
									    	<td ><div ng-if='d.TARSTA=="A"'>Asignada</div>
									    		<div ng-if='d.TARSTA=="P"'>En progreso</div>
									    		<div ng-if='d.TARSTA=="D"'>En destiempo</div>
									    		<div ng-if='d.TARSTA=="V"'>En validación</div>
									    		<div ng-if='d.TARSTA=="T"'>Terminada</div></td>
									    </tr>
									</table>
								</div>
                        	</div>
                        </div>
                        <span class="card-title activator grey-text text-darken-4"><i class="icon-pencil icon-large"></i> Subir entregable</span>
                        <!--a href="#"></a-->
                    </div>
                    <div class="card-reveal">
                    <div ng-if='bloqueado=="false"'>
	    				<span class="card-title grey-text text-darken-4">No puedes subir tu entregable hasta que las tareas de las cuales depende ésta tarea sean terminadas.<i class='fa fa-eye-slash right'></i></span>
	    			</div>
	    			<div ng-if='tarea.TARSTA=="A"'>
	    				<span class="card-title grey-text text-darken-4">No puedes subir tu entregable hasta que no inicias la tarea.<i class='fa fa-eye-slash right'></i></span>
	    			</div>
	    			<div ng-if='tarea.TARSTA=="T"'>
	    				<span class="card-title grey-text text-darken-4">La tarea ya esta terminada.<i class='fa fa-eye-slash right'></i></span>
	    				<br>
	    			</div>
	    			<div ng-if='tarea.TARSTA=="V"'>
	    				<span class="card-title grey-text text-darken-4">La tarea está en progreso de validación.<i class='fa fa-eye-slash right'></i></span>
	    				<br>
	    			</div>
	    			<div ng-if='bloqueado=="true" && tarea.TARSTA=="P"'>
	      			<span class="card-title grey-text text-darken-4">Subir entregable<i class='fa fa-eye-slash right'></i></span>
	      			<form class="form-horizontal" role="form"  ng-submit= "entregable()">
	      				<div class="form-group">
							<label for="ACUCJU">URL de archivo</label>
							<div class="col s12 m12 l12">
								<input class="form-control" id="ACUCJU" ng-model='tarea.TARURL' name="nombre" type="text" class="validate" required>
							</div>
						</div>
					    <div class="form-group">
							<button type="submit" class="btn btn waves-effect waves-red right">Aceptar</button>
						</div>  
				    </form>  
				    </div>
	    			</div>
                </div>
                        
                <!--/.Card Reveal-->
            </div>
        </div>
    </section>
     <div id="demo-toast-example" class="mdl-js-snackbar mdl-snackbar">
          <div class="mdl-snackbar__text"></div>
          <button class="mdl-snackbar__action" type="button"></button>
    </div>
</body>
<script type="text/javascript">
    $.datetimepicker.setLocale('es');
    $('#hora').datetimepicker({
      datepicker:false,
      format:'H:i',
      step:60
    });

    $('.datepicker').datepicker({
        format: 'dd/mm/yyyy'
    });
</script>
</html>
		