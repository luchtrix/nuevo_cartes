<!DOCTYPE html>
<html lang="es" ng-app='secreto'>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CARTES - Nueva Junta</title>
    <!-- Hojas de estilos -->
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../../font-awesome/css/font-awesome.css">
    <!-- Bootstrap core CSS -->
    <link href="../../css/materialize.css" rel="stylesheet">
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="../../css/mdb.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="../../css/style.css" rel="stylesheet">
    <!-- Toast -->
    <link href="../../css/jquery.toastmessage.css" rel="stylesheet">
    <link rel='stylesheet' type='text/css'href='../../css/material.css'/>
    <link href="../../css/styles.css" rel="stylesheet">

    <!-- Scripts -->
    <!-- JQuery -->
    <script type="text/javascript" src="../../js/jquery-2.0.0.min.js"></script>
    <!-- AngularJS -->
    <script type="text/javascript" src="../../js/angular.min.js"></script>
    <!-- Script de control -->
    <script type="text/javascript" src="../../js/socket.io-1.3.7.js"></script>
    <script type="text/javascript" src="../../js/app_invitados.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>
    <!-- Material Design Bootstrap -->
    <script type="text/javascript" src="../../js/mdb.min.js"></script>
    <!-- Materialize core JavaScript -->
    <script type="text/javascript" src="../../js/materialize.min.js"></script>
    <!-- Toast -->
    <script type="text/javascript" src="../../js/jquery.toastmessage.js"></script>
    <script type="text/javascript" src="../../cordova.js"></script>
    <script type="text/javascript" src="../../js/material.js"></script>
    <script type="text/javascript" charset="utf-8">
    function onLoad(){
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // Cordova is loaded and it is now safe to make calls Cordova methods
    //
    function onDeviceReady() {
        document.addEventListener("offline", onOffline, false);
        document.addEventListener("online", onOnline, false);
    }

    // Handle the offline event
    //
    function onOffline() {
      //alert("offline")
      document.getElementById("online").innerHTML = "<div class='alert alert-danger'>Esperando una conexión de red ...</div>";
    }
    function onOnline() {
      //alert("online")
      document.getElementById("online").innerHTML = "";
    }
    </script>
</head>

<body ng-controller='invitadosController' class="full-bg-img" onload="onLoad()">
    <div class="fixed-action-btn" style="bottom: 45px; right: 14px;">
    <a class="btn-floating btn-large red" href="juntas_de_trabajo.html">
      <i class="fa fa-mail-reply"></i>
    </a>
  </div>
    <!-- Intro image -->
    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
      <header class="demo-header mdl-layout__header mdl-color--indigo-300 mdl-color-text--white">
        <div class="mdl-layout__header-row">
          
          <div class="mdl-layout-spacer"></div>
          <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="hdrbtn">
            <i class="fa fa-ellipsis-v"></i>
          </button>
          <!--<ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="hdrbtn">
            <li class="mdl-menu__item">Acerca de</li>
            <li class="mdl-menu__item">Contacto</li>
            <li class="mdl-menu__item">Aviso de privacidad</li>
          </ul>-->
        </div>
      </header>
      <div class="demo-drawer mdl-layout__drawer mdl-color--grey mdl-color-text--blue-grey-50">
        <header class="demo-drawer-header">
          <img src="../../img/user.png" class="demo-avatar">
          <div class="demo-avatar-dropdown">
            <span class="mdl-typography--text-capitalize" style="width:80%;margin:8px;">{{usuario.EMPNOM}}</span>
            
            <button id="accbtn" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-typography--text-right">
              <i class="fa fa-angle-down" role="presentation"></i>
              <span class="visuallyhidden">Accounts</span>
            </button>
            <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="accbtn">
              <li class="mdl-menu__item"><i class="fa fa-home"></i> {{empresa.CIANOM}}</li>
              <li class="mdl-menu__item"><i class="fa fa-cog"></i> <a href="../../config/perfil_user.html">Perfil</a></li>
            </ul>
          </div>
        </header>
        <nav class="demo-navigation mdl-navigation mdl-color--white">
          <a class="mdl-navigation__link" href="../inicio.html"><i class="mdl-color-text--blue-grey-400 fa fa-home" role="presentation"></i>&nbsp;&nbsp;Inicio</a>
          <a class="mdl-navigation__link" href="../juntas/juntas_de_trabajo.html"><i class="mdl-color-text--blue-grey-400 fa fa-group" role="presentation"></i>&nbsp;&nbsp;Juntas</a>
          <a class="mdl-navigation__link logout" href=""><i class="mdl-color-text--blue-grey-400 fa fa-sign-out" role="presentation"></i>&nbsp;&nbsp;Salir</a>
        </nav>
      </div>
    </div>
    <!--/.Navbar-->
    <!-- Contenido -->
    <section> 
        <div class="container">
            <div class="space-30"></div>
            <div class="space-30"></div>
            <div class="col-md-12" id="contenido">
                <!--Card Reveal-->
                <div class="card hoverable">
                    <br>
                    <div ng-if="junta.STATINV == 0">
                        <div class="alert alert-dismissible alert-danger small">
                            <b>- Importante! Si regresa a la página anterior sin enviar antes la invitación a sus empleados, se perderán los datos que tenia registrado.</b>
                        </div>
                        <div class="card-image">
                            <div class="view overlay hm-white-slight z-depth-1">
                                <p class="espacio"> Seleccionar a los invitados para la Junta: <em>{{junta.JUNNUM}}</em></p>
                            </div>
                        </div>
                        <div class="input-field" style="padding: 15px;">
                          <i class="icon-search prefix"></i>
                          <input id="icon_prefix" type="text" class="validate" ng-model='busqueda'>
                          <label for="icon_prefix" class="teal-color">Buscar Empleado</label>
                        </div>
                        <div id="avisoOrdenByJunta"></div>
                        <ul class="collection lista_invitados">
                            <li class="collection-item teal white-text">Empleados:</li>
                            <div ng-if='directivos.length == 0'>No Hay Supervisores Todavía</div>
                            <li class="collection-item avatar" ng-repeat="d in directivos|filter:busqueda">
                                <i class='circle fa fa-user'></i>
                                <p>{{d.EMPNOM}}</p>
                                <p ng-repeat="p in puestos" ng-if="p._id == d.EMPPUE" class="grey-text" style="font-size: 10px;"> {{p.PUENOM}}</p>
                                <a href="#" class="btn btn-floating add-icon indigo secondary-content" ng-click="nuevoInvitado(d._id,junta._id,d.EMPNOM,junta.JUNMOT,junta.JUNFEC,junta.JUNHOR)"><i class="fa fa-plus"></i></a>
                            </li>
                        </ul>
                        <ul class="collection lista_invitados" ng-if="allInv.length > 0">
                            <li class="collection-item red lighten-3 white-text">Lista temporal de invitados:</li>
                            <li class="collection-item avatar" ng-repeat="inv in allInv">
                                <i class='circle fa fa-user'></i>
                                <h6>{{inv.INVEMN}}</h6>
                                <a href="#" class="btn btn-floating add-icon red secondary-content" ng-click="deleteInvitado(inv.INVEMP)"><i class="fa fa-trash-o"></i></a>
                            </li>
                            <div class="text-center">
                                <a href="#" id="confirmarInv" class="btn btn-primary">Mandar Invitaciones</a>
                            </div>
                        </ul>
                    </div>
                    <div ng-if="junta.STATINV == 1">
                        <!--<div class="alert alert-info">Se ha Enviado la invitación</div>-->
                        <div class="alert alert-info">Se han Enviado las invitaciones <i class="fa fa-thumbs-up"></i></div>
                        <div class="card-image">
                            <div class="view overlay hm-white-slight z-depth-1 text-center">
                                <h5 class="espacio">La Junta: <em>{{junta.JUNNUM}}</em>, ya cuenta con Invitados.</h5>
                            </div>
                        </div>
                        <div class="input-field" style="padding: 15px;">
                          <i class="fa fa-search prefix"></i>
                          <input id="icon_prefix" type="text" class="validate" ng-model='busqueda'>
                          <label for="icon_prefix" class="teal-color">Buscar</label>
                        </div>
                        <ul class="collection" ng-if="allInv.length > 0">
                            <li class="collection-item teal white-text">Invitados:</li>
                            <li class="collection-item avatar" ng-repeat="inv in allInv|filter:busqueda">
                                <i class='circle fa fa-user'></i>
                                <h6>{{inv.INVEMN}}</h6>
                            </li>
                        </ul>
                    </div>

                </div>
                <!--/.Card Reveal-->
            </div>
            <!--div class="col-md-12" id="contenido_desfase">
              <p class="espacio center">La fecha para llevar a cabo la Junta: <b>{{junta.JUNNUM}}</b> es hoy o se ha desfasado en tiempo, y es muy pronto para avisar a sus empleados.
              Para poder mandarles una invitación es necesario que edita la fecha de esta Junta 
              <a href="../juntas/junta.html?id={{junta._id}}">Aqui</a>.
              </p>
            </div-->
        </div>
        <!--a href="#" class="btn btn-primary waves-effect waves-light" ng-click="prueba()">Prueba Socket</a-->
    </section>
    <div id="demo-toast-example" class="mdl-js-snackbar mdl-snackbar">
          <div class="mdl-snackbar__text"></div>
          <button class="mdl-snackbar__action" type="button"></button>
        </div>
    <div id="confirmacion" class="modal bottom-sheet">
        <div class="modal-content">
            <div class="row">
                <div class="col s12">
                    <h5 class="grey-text">Confirmar Invitación</h5>
                </div>
            </div>
            <p>&iquest;Realmente desea enviar las invitaciones?</p>
        </div>
        <div class="modal-footer">
            <a class=" modal-action modal-close wavs-effects wavs-green btn-flat">Cancelar</a>
            <a class="wavs-effects wavs-green btn-flat" ng-click="enviarInvitaciones()">Si, Estoy seguro</a>
        </div>
    </div>

</body>
</html>
