
<!DOCTYPE html>
<html lang="es" ng-app='secreto'>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CARTES - Nueva Junta</title>
    <!-- Hojas de estilos -->
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../../font-awesome/css/font-awesome.css">
    <!-- Materialize core CSS -->
    <link href="../../css/materialize.css" rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="../../css/mdb.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="../../css/style.css" rel="stylesheet">
  
    <!-- Toast -->
    <link href="../../css/material.css" rel="stylesheet">
    <!-- Calendario -->
    <link href="../../css/styles.css" rel="stylesheet">
    <!-- Scripts -->
    <!-- JQuery -->
    <script type="text/javascript" src="../../js/jquery-2.0.0.min.js"></script>
    <!-- AngularJS -->
    <script type="text/javascript" src="../../js/angular.min.js"></script>
    <!-- Script de control -->
    <script type="text/javascript" src="../../js/socket.io-1.3.7.js"></script>
    <script type="text/javascript" src="../../js/app_junta.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>
    <!-- Material Design Bootstrap -->
    <script type="text/javascript" src="../../js/mdb.js"></script>
    <!-- Materialize core JavaScript -->
    <script type="text/javascript" src="../../js/materialize.min.js"></script>
    <!-- Toast -->
    <script type="text/javascript" src="../../js/jquery.toastmessage.js"></script>
    <!-- Calendario -->
    <script type="text/javascript" src="../../js/bootstrap-datepicker.js"></script>

    <script type='text/javascript'src='../../js/material.js'></script>
    <script type="text/javascript" src="../../cordova.js"></script>
    <script type="text/javascript" charset="utf-8">

    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // Cordova is loaded and it is now safe to make calls Cordova methods
    //
    function onDeviceReady() {
        document.addEventListener("offline", onOffline, false);
        document.addEventListener("online", onOnline, false);
    }

    // Handle the offline event
    //
    function onOffline() {
      //alert("offline")
      document.getElementById("online").innerHTML = "<div class='alert alert-danger'>Esperando una conexión de red ...</div>";
    }
    function onOnline() {
      //alert("online")
      document.getElementById("online").innerHTML = "";
    }
    </script>

</head>

<body ng-controller='juntaController'  class="full-bg-img" onload="onLoad()">
    <div class="fixed-action-btn vertical click-to-toggle" style="bottom: 45px; right: 24px;">
    <a class="btn-floating btn-large red" >
      <i class="fa fa-ellipsis-v"></i>
    </a>
      <ul>
        <li><a class="btn-floating teal" href="nueva_junta.html"><i class="fa fa-plus"></i></a></li>
        <li><a class="btn-floating blue" href="../inicio.html"><i class="fa fa-home"></i></a></li>
      </ul>
  </div>
    <!--<div class="fixed-action-btn" style="bottom: -15px; right: 0px;">
      <div class="alert alert-danger alertas">
        <a href="nueva_junta.html" class="white-text">Crear Nueva Junta de Trabajo <i class="icon-plus"></i></a>
      </div>
    </div>-->
    <!-- Intro image -->
    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
      <header class="demo-header mdl-layout__header mdl-color--indigo-300 mdl-color-text--white">
        <div class="mdl-layout__header-row">
        
          <div class="mdl-layout-spacer"></div>
          <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="hdrbtn">
            <i class="fa fa-ellipsis-v"></i>
          </button>
          <!--ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="hdrbtn">
            <li class="mdl-menu__item">Acerca de</li>
            <li class="mdl-menu__item">Contacto</li>
            <li class="mdl-menu__item">Aviso de privacidad</li>
          </ul-->
        </div>
      </header>
      <div class="demo-drawer mdl-layout__drawer mdl-color--grey mdl-color-text--blue-grey-50">
        <header class="demo-drawer-header">
          <img src="../../img/user.png" class="demo-avatar">
          <div class="demo-avatar-dropdown">
            <span class="mdl-typography--text-capitalize" style="width:80%;margin:8px;">{{usuario.EMPNOM}}</span>
            
            <button id="accbtn" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-typography--text-right">
              <i class="fa fa-angle-down" role="presentation"></i>
              <span class="visuallyhidden">Accounts</span>
            </button>
            <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="accbtn">
              <li class="mdl-menu__item"><i class="fa fa-home"></i> {{empresa.CIANOM}}</li>
              <li class="mdl-menu__item"><i class="fa fa-cog"></i> <a href="../../config/perfil_user.html">Perfil</a></li>
            </ul>
          </div>
        </header>
        <nav class="demo-navigation mdl-navigation mdl-color--white">
          <a class="mdl-navigation__link" href="../inicio.html"><i class="mdl-color-text--blue-grey-400 fa fa-home" role="presentation"></i>&nbsp;&nbsp;Inicio</a>
          <a class="mdl-navigation__link" href="../juntas/juntas_de_trabajo.html"><i class="mdl-color-text--blue-grey-400 fa fa-group" role="presentation"></i>&nbsp;&nbsp;Juntas</a>
          <a class="mdl-navigation__link logout" href=""><i class="mdl-color-text--blue-grey-400 fa fa-sign-out" role="presentation"></i>&nbsp;&nbsp;Salir</a>
        </nav>
      </div>
    </div>
    <!--/.Navbar-->
    <!-- Contenido -->

    <section>
        <div class="container">
        
          <div class="space-30"></div>
          <div class="main-wrapper">
            <!--div class="container-fluid">
                <div class="row"-->
                  <br><br>
                    <div class="card-panel bl-panel hoverable">
                        <div class="row info-section text-center black-text">
                            <h5 style="margin-left:45px;">Hola! {{usuario.EMPNOM}}</h5>
                            Se muestran tus Juntas de Trabajo
                        </div>
                        <br>
                        <div class="alert alert-dismissible alert-danger small">
                          <i class="icon-eye-open"></i>
                          Para Invitar a un empleado debe de crear una Orden del día de la junta.<br>
                          <i class="icon-eye-open"></i>
                          Para Cancelar una Junta, debe de hacerlo antes de aceptar los acuerdos creados.<br>
                          <i class="icon-eye-open"></i>Las Juntas estan divididas en 3: Cerradas, Sin Cerrar y Canceladas.
                        </div>
                        <br>
                        <!--h5>Mis Juntas</h5-->
                        <ul class="nav nav-tabs tabs-3">
                          <li class="active"><a data-toggle="tab" href="#menu1">Sin cerrar</a></li>
                          <li><a data-toggle="tab" href="#home">Cerradas</a></li>
                          <li><a data-toggle="tab" href="#menu2">Canceladas</a></li>
                        </ul>
                        <div class="tab-content card-panel blue-grey lighten-5">
                          <div id="home" class="tab-pane">
                            <br>
                            <div class="input-field">
                              <i class="icon-search prefix"></i>
                              <input id="icon_prefix" type="text" class="validate" ng-model='busqueda2'>
                              <label for="icon_prefix" class="teal-color">Buscar Junta de Trabajo</label>
                            </div>
                            <ul class="collection">
                              <li class="collection-item avatar" ng-repeat="j in juntas|filter:busqueda2" ng-if="j.JUNIDE == usuario._id && j.JUNSTA == 'A'">
                                <!--i ng-if="j.JUNSTA == 'C'" class='circle brown teal-text text-darken-1' ></i>
                                <i ng-if="j.JUNSTA == 'O'" class='circle green teal-text text-darken-1' ></i-->
                                <i ng-if="j.JUNSTA == 'A'" class='circle blue teal-text text-darken-1' ></i>
                                <!--i ng-if="j.JUNSTA == 'F'" class='circle red teal-text text-darken-1' ></i-->
                                  <p>{{j.JUNNUM}}<br>
                                     A las {{j.JUNHOR}} el {{j.JUNFEC}} en {{j.JUNLUG}}...<br>
                                    <!--div ng-if="j.JUNSTA == 'C'"><p><b>Status: Creada y en Progreso</b></p></div>
                                    <div ng-if="j.JUNSTA == 'O'"><p><b>Status: Acordada</b></p></div-->
                                    <div ng-if="j.JUNSTA == 'A'"><p><b>Status: Asignado y Cerrado</b></p></div>
                                    <!--div ng-if="j.JUNSTA == 'F'"><p><b>Status: Cancelado</b></p></div-->
                                  </p>
                                  <hr>

                                  <div ng-if="j.STATORD == 1 && j.STATINV == 1">
                                   <div class="alert alert-success" ng-if="j.JUNSTA=='A'">
                                      Los acuerdos de la orden del dia de esta junta ya fueron enviados a los supervisores correspondientes y se cerró la Junta <i class="fa fa-thumbs-up"></i>.<hr>
                                      <strong>Reporte de los Acuerdos</strong>
                                      <a href="../acuerdos/enviarAcuerdos.html?id={{j._id}}"><i class="fa fa-folder-open"></i></a>
                                    </div>
                                  </div>
                                </li>
                            </ul>
                          </div>
                          <!-- Juntas en Progreso -->
                          <div id="menu1" class="tab-pane fade in active">
                            <br>
                            <div class="input-field">
                              <i class="icon-search prefix"></i>
                              <input id="icon_prefix" type="text" class="validate" ng-model='busqueda1'>
                              <label for="icon_prefix" class="teal-color">Buscar Junta de Trabajo</label>
                            </div>
                            <ul class="collection">
                              <li class="collection-item avatar" ng-repeat="j in juntas|filter:busqueda1" ng-if="j.JUNIDE == usuario._id && (j.JUNSTA == 'C' || j.JUNSTA == 'O')">
                              <i ng-if="j.JUNSTA == 'C'" class='circle brown teal-text text-darken-1' ></i>
                              <i ng-if="j.JUNSTA == 'O'" class='circle green teal-text text-darken-1' ></i>
                                <p>{{j.JUNNUM}}<br>
                                   A las {{j.JUNHOR}} el {{j.JUNFEC}} en {{j.JUNLUG}}...<br>
                                  <div ng-if="j.JUNSTA == 'C'"><p><b>Status: Creada y en Progreso</b></p></div>
                                  <div ng-if="j.JUNSTA == 'O'"><p><b>Status: Acordada</b></p></div>
                                </p>
                                <hr>
                                <div ng-if="j.STATORD == 0 && j.STATINV == 0">
                                  <div ng-if="j.JUNSTA=='C'" class="alert alert-info">
                                    Empieze por Crear puntos de la orden del dia <a href="../orden/orden_del_dia.html?id={{j._id}}"><i class="icon-hand-right"></i></a>
                                  </div>
                                </div>

                                <div ng-if="j.STATORD == 1 && j.STATINV == 0">
                                  <div ng-if="j.JUNSTA=='C'" class="alert alert-info">
                                    Ya tiene una orden del dia, ahora debe de Invitar a Supervisores <a href="invitarEmpleados.html?id={{j._id}}"><i class="icon-hand-right"></i></a>
                                  </div>
                                </div>

                                <div ng-if="j.STATORD == 1 && j.STATINV == 1">
                                  <div class="alert alert-info" ng-if="j.JUNSTA=='C'">
                                  
                                    Ya tiene una orden del dia, y ya cuenta con Invitados para la Junta, ahora agregue Acuerdos 
                                    <a href="../acuerdos/acuerdos.html?id={{j._id}}"><i class="icon-hand-right"></i></a>
                                  </div>
                                  <div class="alert alert-success" ng-if="j.JUNSTA=='O'">
                                    Los acuerdos de la orden del dia de esta junta ya fueron asignados.<hr>
                                    <strong>Envíe los acuerdos para finalizar por completo la actividad de esta junta</strong>
                                    <a href="../acuerdos/enviarAcuerdos.html?id={{j._id}}"><i class="fa fa-send"></i></a>
                                  </div>
                                </div>
                                <div ng-if="j.JUNSTA == 'C'">
                                  <div class="dropdown secondary-content">
                                    <a href="#" class="dropdown-toggle" data-toggle='dropdown'><i class="small mdi-navigation-more-vert right"></i></a>
                                    <ul class="dropdown-menu dropdown-menu-right estiloMenu" style="">
                                      <li><a href="../orden/orden_del_dia.html?id={{j._id}}"><i class="fa fa-pencil"></i> Crear Orden</a></li>
                                      <li style="" ng-if="j.STATINV != 1"><a href="junta.html?id={{j._id}}"><i class="fa fa-pencil-square-o"></i> Editar Junta</a></li>
                                      <li><a href="invitarEmpleados.html?id={{j._id}}" ng-if="j.STATORD == 1"><i class="fa fa-user"></i> Invitar Empleados</a></li>
                                      <li>
                                      <li ng-if="j.JUNSTA=='C'"><a href="../acuerdos/acuerdos.html?id={{j._id}}" ng-if="j.STATINV == 1"><i class="fa fa-file-text"></i> Crear acuerdos</a></li>
                                      <li ng-if="j.JUNSTA=='O'"><a href="../acuerdos/enviarAcuerdos.html?id={{j._id}}" ng-if="j.STATORD == 1"><i class="icon-plus"></i> Enviar acuerdos</a></li>
                                      <li>
                                        <a href="#" ng-click="openModalCancel(j._id)"><i class="fa fa-level-down"></i> Cancelar Junta</a>
                                      </li>
                                    </ul>
                                  </div>
                                </div>
                              </li>
                          </ul>
                          </div>
                          <!-- Juntas Canceladas -->
                          <div id="menu2" class="tab-pane fade">
                            <br>
                            <div class="input-field">
                              <i class="icon-search prefix"></i>
                              <input id="icon_prefix" type="text" class="validate" ng-model='busqueda3'>
                              <label for="icon_prefix" class="teal-color">Buscar Junta de Trabajo</label>
                            </div>
                            <ul class="collection">
                              <li class="collection-item avatar" ng-repeat="j in juntas|filter:busqueda3" ng-if="j.JUNIDE == usuario._id && j.JUNSTA == 'F'">
                              <!--i ng-if="j.JUNSTA == 'C'" class='circle brown teal-text text-darken-1' ></i>
                              <i ng-if="j.JUNSTA == 'O'" class='circle green teal-text text-darken-1' ></i>
                              <i ng-if="j.JUNSTA == 'A'" class='circle blue teal-text text-darken-1' ></i-->
                              <i ng-if="j.JUNSTA == 'F'" class='circle red teal-text text-darken-1' ></i>
                                <p>{{j.JUNNUM}}<br>
                                   A las {{j.JUNHOR}} el {{j.JUNFEC}} en {{j.JUNLUG}}...<br>
                                  <!--div ng-if="j.JUNSTA == 'C'"><p><b>Status: Creada y en Progreso</b></p></div>
                                  <div ng-if="j.JUNSTA == 'O'"><p><b>Status: Acordada</b></p></div>
                                  <div ng-if="j.JUNSTA == 'A'"><p><b>Status: Asignado y Cerrado</b></p></div-->
                                  <div ng-if="j.JUNSTA == 'F'"><p><b>Status: Cancelado</b></p></div>
                                </p>
                                <hr>
                                <div ng-if="j.STATORD == 0 && j.STATINV == 0">
                                  <!--div ng-if="j.JUNSTA=='C'" class="alert alert-info">
                                    Empieze por Crear puntos de la orden del dia <a href="../orden/orden_del_dia.html?id={{j._id}}"><i class="icon-hand-right"></i></a>
                                  </div-->
                                  <div class="alert alert-danger" ng-if="j.JUNSTA=='F'">
                                    La Junta ha sido <strong>Cancelada </strong> <i class="fa fa-level-down"></i>
                                  </div>
                                </div>

                                <div ng-if="j.STATORD == 1 && j.STATINV == 0">
                                  <!--div ng-if="j.JUNSTA=='C'" class="alert alert-info">
                                    Ya tiene una orden del dia, ahora debe de Invitar a Supervisores <a href="invitarEmpleados.html?id={{j._id}}"><i class="icon-hand-right"></i></a>
                                  </div-->
                                  <div class="alert alert-danger" ng-if="j.JUNSTA=='F'">
                                    La Junta ha sido <strong>Cancelada </strong> <i class="fa fa-level-down"></i>
                                  </div>
                                </div>

                                <div ng-if="j.STATORD == 1 && j.STATINV == 1">
                                  <!--div class="alert alert-info" ng-if="j.JUNSTA=='C'">
                                    Ya tiene una orden del dia, y ya cuenta con Invitados para la Junta, ahora agregue Acuerdos 
                                    <a href="../acuerdos/acuerdos.html?id={{j._id}}"><i class="icon-hand-right"></i></a>
                                  </div>
                                  <div class="alert alert-success" ng-if="j.JUNSTA=='O'">
                                    Los acuerdos de la orden del dia de esta junta ya fueron asignados.<hr>
                                    <strong>Envíe los acuerdos para finalizar por completo la actividad de esta junta</strong>
                                    <a href="../acuerdos/enviarAcuerdos.html?id={{j._id}}"><i class="icon-hand-right"></i></a>
                                  </div>
                                  <div class="alert alert-success" ng-if="j.JUNSTA=='A'">
                                    Los acuerdos de la orden del dia de esta junta ya fueron enviados a los supervisores correspondientes y se Cerró la Junta <i class="icon-thumbs-up icon-2x"></i>.<hr>
                                    <strong>Ver los acuerdos enviados</strong>
                                    <a href="../acuerdos/enviarAcuerdos.html?id={{j._id}}"><i class="icon-eye-open"></i></a>
                                  </div-->
                                  <div class="alert alert-danger" ng-if="j.JUNSTA=='F'">
                                    La Junta ha sido <strong>Cancelada </strong> <i class="fa fa-level-down"></i>
                                  </div>
                                </div>
                                <!--div ng-if="j.JUNSTA == 'C'">
                                  <div class="dropdown secondary-content">
                                    <a href="#" class="dropdown-toggle" data-toggle='dropdown'><i class="small mdi-navigation-more-vert right"></i></a>
                                    <ul class="dropdown-menu dropdown-menu-right estiloMenu" style="">
                                      <li><a href="../orden/orden_del_dia.html?id={{j._id}}"><i class="icon-plus"></i> Crear Orden</a></li>
                                      <li style="" ng-if="j.STATINV != 1"><a href="junta.html?id={{j._id}}"><i class="icon-pencil"></i> Editar Junta</a></li>
                                      <li><a href="invitarEmpleados.html?id={{j._id}}" ng-if="j.STATORD == 1"><i class="icon-plus"></i> Invitar Empleados</a></li>
                                      <li>
                                        <a href="#" ng-click="openModalCancel(j._id)"><i class="icon-trash"></i> Cancelar Junta</a>
                                      </li>
                                    </ul>
                                  </div>
                                </div-->
                              </li>
                          </ul>
                          </div>
                        </div>
                    </div>
                <!--/div>
            </div-->
        </div>
    </section>

    <!--/. Intro image -->
    <!-- Modal para confirmar eliminar -->
    <div ng-repeat="j in juntas">
      <div id="{{j._id}}-Delete" class="modal bottom-sheet">
        <div class="modal-content">
          <div class="row">
            <div class="col s12">
              <h5 class="grey-text">Eliminar Junta {{j.JUNNUM}}</h5>
            </div>
          </div>
          <p>&iquest;Realmente desea eliminar la Junta <b>{{j.JUNNUM}}</b>?</p>
        </div>
        <div class="modal-footer">
          <a class="mdi-navigation-close modal-action modal-close wavs-effects wavs-green btn-flat">No, Cancelar</a>
          <a href="#" class="wavs-effects wavs-green btn-flat" ng-click="deleteJunta(j._id)"><i class="mdi-action-delete"></i>Si, lo deseo Eliminar</a>
        </div>
      </div>

      <div id="{{j._id}}-Cancel" class="modal bottom-sheet">
        <div class="modal-content">
          <div class="row">
            <div class="col s12">
              <h5 class="grey-text">&iquest;Realmente desea Cancelar la Junta <b>{{j.JUNNUM}}</b>?</h5>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <a class="modal-action modal-close wavs-effects wavs-green btn-flat">No</a>
          <a href="#" class="wavs-effects wavs-green btn-flat" ng-click="cancelJunta(j._id)">Si</a>
        </div>
      </div>

    </div>
    <div id="demo-toast-example" class="mdl-js-snackbar mdl-snackbar">
          <div class="mdl-snackbar__text"></div>
          <button class="mdl-snackbar__action" type="button"></button>
        </div>
</body>
</html>